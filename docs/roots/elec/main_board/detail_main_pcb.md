# メイン基板について　　

`このページでは2017年モデルの設計資料を紹介します`
## はじめに

ロボカップSSLマシンを動かすためのメイン基板です。

メインCPUとしてmbed NUCLEO-F303K8を使用し、通信モジュールとして2.4GHz帯のXBee シリーズ1を搭載します。

AIPCからのベクトル値を分解し各車輪を駆動させるモータードライバへ指令値を送信します。

また、キッカーを駆動するための昇圧基板の制御も行います。

## メイン基板の機能

* AIPCとの通信
* ID情報等のLCD表示
* モータードライバ基板への指令値送信
* 昇圧基板の制御
* 昇圧電源の強制放電
* ボールセンサによるボールの検出
* ドリブル用モータの駆動

## メイン基板の使用方法

Roots製モタドラ基板、昇圧基板、センサ基板と組み合わせて使用します。

ロボット本体の放電SWと電源SWと配線します。

CAN回路の終端抵抗はメイン基板に実装されています。
CANバスのはんだジャンパを切り替えることで実装・未実装を切り替えることが可能です。

左側の4ピンコネクタからI2Cバスを拡張することが可能です。

電源・放電SWピン配置

* 1:電源SW
* 2:GND
* 3:放電SW
* 4:GND


昇圧基板ピン配置

* 1:チップキック信号出力
* 2:ストレートキック信号出力
* 3:CHG_DONE信号入力(充電完了信号入力)
* 4:3.3V
* 5:イネーブル信号出力
* 6:+5V
* 7:GND
* 8:GND
* 9:GND
* 10:VCC(バッテリ電圧)
* 11:VCC(バッテリ電圧)
* 12:VCC(バッテリ電圧)

センサ基板ピン配置

* 1:+5V(VCC)
* 2:センサ入力(オープンコレクタ出力)
* 3:GND

## 注意点

配線時に確実に各基板と同名の信号となるよう配線してください。
逆に接続した場合は破壊の危険があります。

モタドラ挿入時はピンがズレないように気を付けてください。
ピンがズレた状態で電源を投入すると破壊します。

## 定格

電源電圧:13V～17V

XBeePROには対応していません。

## 作成方法

回路図・部品表は右記リンク先：[MainBoard](https://github.com/SSL-Roots/Circuit_MainBoard)

1. チップ部品をはんだ付けします。
2. LCDをはんだ付けします。
3. ピンソケットをはんだ付けします。
4. SWをはんだ付けします。
5. EMIフィルタをはんだ付けします。
6. 3端子レギュレータとFETをはんだ付けします。
7. 電解コンデンサをはんだ付けします。
8. コネクタをはんだ付けします。
9. 細ピンヘッダをはんだ付けします。
10. J300,J301,J501,J502をはんだショートします。
11. XTコネクタを下向きにはんだ付けするか、線でXTコネクタを配線してください。
